<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1054.9033995951925 639.1406802875654" width="1054.9033995951925" height="639.1406802875654" filter="invert(93%) hue-rotate(180deg)">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
    </style>
    
  </defs>
  <rect x="0" y="0" width="1054.9033995951925" height="639.1406802875654" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(297.40478515625 10) rotate(0 64.85752868652344 48.529747009277344)"><path d="M24.26 0 M24.26 0 C48 -0.76, 70.45 -1.11, 105.45 0 M24.26 0 C56.52 -0.4, 89.5 0.68, 105.45 0 M105.45 0 C123.16 1, 131.05 6.37, 129.72 24.26 M105.45 0 C121.29 -0.21, 130.54 7.62, 129.72 24.26 M129.72 24.26 C129.37 36.33, 130.27 48.1, 129.72 72.79 M129.72 24.26 C130.51 36.25, 130.01 47.12, 129.72 72.79 M129.72 72.79 C128.46 89.23, 123.12 95.31, 105.45 97.06 M129.72 72.79 C127.93 87.58, 123.25 95.25, 105.45 97.06 M105.45 97.06 C75.18 99.01, 44.68 98.71, 24.26 97.06 M105.45 97.06 C74.36 96.58, 40.98 97.57, 24.26 97.06 M24.26 97.06 C9.21 95.19, -1.66 88.67, 0 72.79 M24.26 97.06 C7.12 96.82, -0.88 88.29, 0 72.79 M0 72.79 C-0.34 52.51, -1.1 33.78, 0 24.26 M0 72.79 C0.27 55.36, -0.57 39.7, 0 24.26 M0 24.26 C0.18 8.59, 9.57 -1.76, 24.26 0 M0 24.26 C-1.28 9, 8.15 -0.58, 24.26 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(343.25233459472656 46.029747009277344) rotate(0 19.009979248046875 12.5)"><text x="19.009979248046875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Get</text></g><g stroke-linecap="round" transform="translate(470.2682800292969 13.1756591796875) rotate(0 73.41845703125 46.193809509277344)"><path d="M23.1 0 M23.1 0 C42.89 1.93, 66.51 0.97, 123.74 0 M23.1 0 C54.82 0.08, 86.25 -0.03, 123.74 0 M123.74 0 C138.75 1.6, 147.77 9.05, 146.84 23.1 M123.74 0 C137.43 0.6, 148.38 8.75, 146.84 23.1 M146.84 23.1 C144.44 36.15, 144.9 47.93, 146.84 69.29 M146.84 23.1 C146.18 40.55, 147.64 56.66, 146.84 69.29 M146.84 69.29 C146.42 85.25, 140.78 94.23, 123.74 92.39 M146.84 69.29 C145.96 86.36, 139.82 92.68, 123.74 92.39 M123.74 92.39 C96.44 92.76, 68.07 92.08, 23.1 92.39 M123.74 92.39 C90.84 92.9, 59.39 91.41, 23.1 92.39 M23.1 92.39 C5.88 91.62, 1.05 83.81, 0 69.29 M23.1 92.39 C6.53 91.72, -0.5 86.93, 0 69.29 M0 69.29 C-1.63 55.94, 0.62 40.49, 0 23.1 M0 69.29 C0.42 56.64, -0.38 45.17, 0 23.1 M0 23.1 C-1.59 5.92, 7.45 0.01, 23.1 0 M0 23.1 C1.5 7.82, 5.57 -0.96, 23.1 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(479.59680938720703 21.869468688964844) rotate(0 64.08992767333984 37.5)"><text x="64.08992767333984" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Get mtbl/wal</text><text x="64.08992767333984" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">lock, Check </text><text x="64.08992767333984" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Memtable</text></g><g stroke-linecap="round" transform="translate(656.5430603027344 14.085861206054688) rotate(0 79.33840942382812 47.73748779296875)"><path d="M23.87 0 M23.87 0 C57.88 2.46, 95.43 1.7, 134.81 0 M23.87 0 C53.24 -1.11, 81.29 -0.57, 134.81 0 M134.81 0 C149.13 -1.78, 158.43 7.96, 158.68 23.87 M134.81 0 C152.22 0.12, 156.55 7, 158.68 23.87 M158.68 23.87 C157.38 38.52, 159.53 52.57, 158.68 71.61 M158.68 23.87 C158.8 36.89, 158.95 48.4, 158.68 71.61 M158.68 71.61 C159.01 88.56, 149.23 96.6, 134.81 95.47 M158.68 71.61 C159.88 89.67, 149.15 96.19, 134.81 95.47 M134.81 95.47 C97.25 95.76, 59.63 95.6, 23.87 95.47 M134.81 95.47 C96.99 95.87, 59.88 95.56, 23.87 95.47 M23.87 95.47 C7.35 97.24, 0.61 88.04, 0 71.61 M23.87 95.47 C6.47 94.74, 0.12 85.43, 0 71.61 M0 71.61 C1.88 62.78, -0.97 50.03, 0 23.87 M0 71.61 C0.21 60.89, -0.91 48.45, 0 23.87 M0 23.87 C0.82 8.54, 6.19 1.27, 23.87 0 M0 23.87 C-1.4 6.94, 8.83 -1.71, 23.87 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(665.0215584891182 37.42250061035156) rotate(0 88.4299087524414 25)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Get fs/tree </text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">locks, Check SSTs</text></g><g stroke-linecap="round"><g transform="translate(432.2719421386719 46.661773681640625) rotate(0 18.954963079839956 -0.09327032750203301)"><path d="M-1.13 -1.15 C5.25 -1.2, 32.66 -0.57, 39.04 -0.51 M0.47 0.86 C6.74 1.01, 32.8 0.98, 38.72 0.88" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(432.2719421386719 46.661773681640625) rotate(0 18.954963079839956 -0.09327032750203301)"><path d="M19.18 9.37 C26.94 4.17, 32.92 3.09, 38 1.24 M20.3 7.73 C25.47 6.46, 29.54 4.25, 38.13 1.45" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(432.2719421386719 46.661773681640625) rotate(0 18.954963079839956 -0.09327032750203301)"><path d="M19.09 -3.58 C26.86 -4.1, 32.87 -0.52, 38 1.24 M20.21 -5.21 C25.5 -3.45, 29.58 -2.64, 38.13 1.45" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(616.1551818847656 51.39385986328125) rotate(0 20.686419771048236 0.2376834355599584)"><path d="M0.2 0.81 C7.09 0.87, 35.54 1.24, 42.53 1 M-1.16 0.19 C5.51 -0.12, 34.67 -0.62, 41.77 -0.6" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(616.1551818847656 51.39385986328125) rotate(0 20.686419771048236 0.2376834355599584)"><path d="M23.36 7.37 C31.46 3.81, 36.54 1.99, 42.64 -0.08 M22.34 6.28 C27.64 5.79, 32.69 3.98, 41.71 -0.48" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(616.1551818847656 51.39385986328125) rotate(0 20.686419771048236 0.2376834355599584)"><path d="M23.23 -7.06 C31.46 -4.9, 36.58 -1.01, 42.64 -0.08 M22.2 -8.14 C27.68 -4.83, 32.77 -2.83, 41.71 -0.48" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(227.32534790039062 168.9931182861328) rotate(0 70.30238342285156 48.60111999511719)"><path d="M24.3 0 M24.3 0 C48.06 -1.95, 72.03 -2.29, 116.3 0 M24.3 0 C45.22 -1.25, 67.02 -0.34, 116.3 0 M116.3 0 C134.44 -1.6, 139.54 8.45, 140.6 24.3 M116.3 0 C133.45 -1.1, 141.44 6.75, 140.6 24.3 M140.6 24.3 C139.88 33.41, 140.12 47.41, 140.6 72.9 M140.6 24.3 C140.13 34.95, 140.62 45.93, 140.6 72.9 M140.6 72.9 C141.19 90.32, 132.58 96.43, 116.3 97.2 M140.6 72.9 C139.59 90.5, 133.59 97.37, 116.3 97.2 M116.3 97.2 C82.06 99.06, 51.76 96.22, 24.3 97.2 M116.3 97.2 C87.1 98.99, 57.12 98.25, 24.3 97.2 M24.3 97.2 C8.41 96.91, 1.94 90.11, 0 72.9 M24.3 97.2 C10.39 98.22, -0.41 90.32, 0 72.9 M0 72.9 C0.38 58.91, -1.79 44.53, 0 24.3 M0 72.9 C-0.88 59.71, -0.19 45.68, 0 24.3 M0 24.3 C1.24 7.55, 9.99 -0.79, 24.3 0 M0 24.3 C0.76 9.16, 6.42 -0.98, 24.3 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(278.2177505493164 205.09423828125) rotate(0 19.40998077392578 12.5)"><text x="19.40998077392578" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">P/D</text></g><g stroke-linecap="round" transform="translate(241.7303466796875 331.69752502441406) rotate(0 86.6617431640625 51.87852478027344)"><path d="M25.94 0 M25.94 0 C56.13 -1.41, 89.34 -1.64, 147.38 0 M25.94 0 C51.9 0.64, 78.78 1.03, 147.38 0 M147.38 0 C164.18 1.9, 172.92 10.29, 173.32 25.94 M147.38 0 C162.62 -0.67, 174.64 8.76, 173.32 25.94 M173.32 25.94 C173.2 46.29, 174.89 66.43, 173.32 77.82 M173.32 25.94 C173.55 45.1, 173.6 63.13, 173.32 77.82 M173.32 77.82 C171.42 95.44, 164.09 103.67, 147.38 103.76 M173.32 77.82 C172.34 93.33, 163.6 102.75, 147.38 103.76 M147.38 103.76 C104.19 101.2, 64.57 101.34, 25.94 103.76 M147.38 103.76 C111.36 103.67, 75.14 103.43, 25.94 103.76 M25.94 103.76 C10.25 103.03, 0.1 95.87, 0 77.82 M25.94 103.76 C10.23 104.98, -0.75 94.62, 0 77.82 M0 77.82 C-0.34 60.22, 0.73 45.17, 0 25.94 M0 77.82 C0.21 59.38, -0.03 40.81, 0 25.94 M0 25.94 C1.35 9.31, 9.94 1.62, 25.94 0 M0 25.94 C-1.98 9.57, 6.85 -0.35, 25.94 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(259.3021697998047 346.0760498046875) rotate(0 69.08992004394531 37.5)"><text x="69.08992004394531" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Get mtbl/wal </text><text x="69.08992004394531" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">lock, update </text><text x="69.08992004394531" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">memtable, wal</text></g><g stroke-linecap="round" transform="translate(559.6687927246094 325.7855682373047) rotate(0 68.23583984375 49.65003967285156)"><path d="M24.83 0 M24.83 0 C49.21 -0.56, 75.42 -2.03, 111.65 0 M24.83 0 C46.3 -1.58, 65.44 -0.94, 111.65 0 M111.65 0 C129.65 0.38, 134.57 9.54, 136.47 24.83 M111.65 0 C127.18 1.04, 136.26 10.18, 136.47 24.83 M136.47 24.83 C136.87 40.38, 136.02 57.97, 136.47 74.48 M136.47 24.83 C136.21 39.19, 137.5 54.71, 136.47 74.48 M136.47 74.48 C136.44 91.88, 130.02 99.13, 111.65 99.3 M136.47 74.48 C135.26 91.74, 130.03 98.56, 111.65 99.3 M111.65 99.3 C91.59 98.55, 67.63 98.48, 24.83 99.3 M111.65 99.3 C78.51 100.88, 45.2 99.28, 24.83 99.3 M24.83 99.3 C6.37 99.43, -0.62 91.56, 0 74.48 M24.83 99.3 C9.03 101.12, 1.15 92.47, 0 74.48 M0 74.48 C1.09 60.84, 0.78 42.26, 0 24.83 M0 74.48 C0.98 57.7, -0.72 42.29, 0 24.83 M0 24.83 C1.65 9.93, 7.99 -1.1, 24.83 0 M0 24.83 C1.05 9.14, 7.17 -0.97, 24.83 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(566.184700012207 337.93560791015625) rotate(0 61.719932556152344 37.5)"><text x="61.719932556152344" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Get FS/tree</text><text x="61.719932556152344" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">lock, Flush </text><text x="61.719932556152344" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">to ssts</text></g><g stroke-linecap="round" transform="translate(853.8132019042969 327.69346618652344) rotate(0 66.06243896484375 44.83270263671875)"><path d="M22.42 0 M22.42 0 C51.13 2.5, 84.88 2.04, 109.71 0 M22.42 0 C56.75 0.91, 88.96 -0.1, 109.71 0 M109.71 0 C124.23 0.94, 133.76 8.18, 132.12 22.42 M109.71 0 C126.29 -1.95, 133.86 8.87, 132.12 22.42 M132.12 22.42 C131.22 34.75, 133.49 44.49, 132.12 67.25 M132.12 22.42 C132.32 38.73, 132.21 56.73, 132.12 67.25 M132.12 67.25 C132.56 83.99, 126.47 87.8, 109.71 89.67 M132.12 67.25 C132.22 81.15, 126.4 88.2, 109.71 89.67 M109.71 89.67 C85.83 90.62, 60.41 90.48, 22.42 89.67 M109.71 89.67 C84.44 88.24, 57.42 88.75, 22.42 89.67 M22.42 89.67 C6.73 88.89, -2 82.69, 0 67.25 M22.42 89.67 C5.76 88.36, -1.2 83.16, 0 67.25 M0 67.25 C-0.29 51.9, -1.45 36.29, 0 22.42 M0 67.25 C-0.45 56.98, 0.25 46.33, 0 22.42 M0 22.42 C-0.95 7.08, 6.74 -0.1, 22.42 0 M0 22.42 C1.46 7.58, 6.54 1.16, 22.42 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(879.2956848144531 360.0261688232422) rotate(0 40.5799560546875 12.5)"><text x="40.5799560546875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Compact</text></g><g stroke-linecap="round"><g transform="translate(302.1830660786545 267.1953582763672) rotate(0 4.918575331823234 29.20730995663442)"><path d="M-0.03 -0.06 C1.52 9.57, 7.25 48.68, 9.03 58.4 M-1.5 -1.13 C0.45 8.57, 9.37 49.51, 11.34 59.55" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(302.1830660786545 267.1953582763672) rotate(0 4.918575331823234 29.20730995663442)"><path d="M-4.55 32.8 C-1.15 42.63, 3.02 48.87, 12.48 59.96 M-4.38 34.94 C-1.02 40.54, 3.61 46.25, 12.26 59.25" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(302.1830660786545 267.1953582763672) rotate(0 4.918575331823234 29.20730995663442)"><path d="M15.53 28.61 C13.34 39.61, 11.9 47.01, 12.48 59.96 M15.69 30.75 C14.2 37.26, 14 43.97, 12.26 59.25" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(417.8036193847656 371.6823565607325) rotate(0 69.86731773826762 -2.2488234924862525)"><path d="M0.48 -0.1 C23.7 -0.43, 117.33 -2.34, 140.47 -2.75 M-0.73 -1.2 C22.24 -1.79, 115.81 -3.88, 139.53 -4.4" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(417.8036193847656 371.6823565607325) rotate(0 69.86731773826762 -2.2488234924862525)"><path d="M111.41 6.51 C124.12 0.17, 135.47 -2.23, 140.17 -2.44 M112.5 6.31 C120.71 3.3, 129.22 0.15, 139.08 -3.47" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(417.8036193847656 371.6823565607325) rotate(0 69.86731773826762 -2.2488234924862525)"><path d="M110.95 -14.01 C123.72 -12.29, 135.25 -6.64, 140.17 -2.44 M112.04 -14.21 C120.47 -10.85, 129.12 -7.64, 139.08 -3.47" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(433.1716003417969 334.7571563720703) rotate(0 31.109962463378906 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">If full</text></g><g stroke-linecap="round"><g transform="translate(699.5057678222656 372.15675625173174) rotate(0 73.08868694042326 1.484448208046416)"><path d="M1.13 0.46 C25.56 1.03, 121.79 3.07, 145.91 3.31 M0.27 -0.34 C24.62 -0.14, 120.98 0.87, 145.14 1.38" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(699.5057678222656 372.15675625173174) rotate(0 73.08868694042326 1.484448208046416)"><path d="M117.57 11.8 C124.4 9.02, 129.08 6.09, 146.08 0.73 M116.53 11.74 C126.38 7.49, 135.94 5.31, 145.17 2.04" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(699.5057678222656 372.15675625173174) rotate(0 73.08868694042326 1.484448208046416)"><path d="M117.88 -8.72 C124.61 -6.43, 129.22 -4.31, 146.08 0.73 M116.84 -8.78 C126.79 -6.3, 136.25 -1.76, 145.17 2.04" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(716.6498718261719 327.98240661621094) rotate(0 57.53993225097656 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">If level full</text></g><g transform="translate(10 462.14772033691406) rotate(0 247.00970458984375 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Note: it should be possible to make mtbl lock-free</text></g><g transform="translate(18.090606689453125 504.8191680908203) rotate(0 279.1097106933594 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Concurrency goal: flush new walentries every 10ms or 4kb</text></g><g transform="translate(38.52158981561661 555.5692517161368) rotate(0 172.07980346679688 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">FS/Tree locks are not fine grained</text></g><g transform="translate(45.66444695847372 604.1406802875654) rotate(0 499.6194763183594 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Compaction is expensive. Can data be continuously compacted or not (completely) block writes/reads?</text></g></svg>